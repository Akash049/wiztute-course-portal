(self["webpackJsonp"] = self["webpackJsonp"] || []).push([["q8p8"],{"Mq8p8":function(_,__,__webpack_require__){__webpack_require__.n_x = __webpack_require__.n;__webpack_require__("MEEO/");self._ad7c2fd0a872ef66d228a0d2ca415b43 = self._ad7c2fd0a872ef66d228a0d2ca415b43 || {};(function(__c) {'use strict';var l7b=function(a){return{password:__c.C("password",a.password),token:__c.C("token",a.token)}},n7b=function(a){const b=__c.r("type",a);switch(b){case "SUCCESS":return __c.k("SUCCESS"===a.type),new __c.ncb({user:__c.v("user",a),email:__c.r("email",a)});case "ERROR":return __c.k("ERROR"===a.type),new m7b;default:throw Error(`unknown case: ${b}`);}},o7b=function(a){return new __c.llb({Pq:__c.gb(__c.NKa,"A",a)})},o4=function(a){let b=a.message,c=a.links,d=a.className,e=a.Ya,g=a.ba,h=a.Um;
return l=>{let m=l.Pf;l=n4.useMemo(()=>{const p=new __c.Ty(g);p.lu("strong",(t,u,w)=>n4.createElement("span",{className:"Qxl-SQ",key:w},u));p.lu("alert-link",(t,u,w)=>{__c.k(t instanceof HTMLElement);t=__c.n(t.dataset.id,"links must have id attribute");const x=__c.n(c.get(t),"navigationMethod for id {id} is not defined");switch(x.type){case "INTERNAL":return n4.createElement(p7b,{key:w,to:x.url,onClick:q7b({id:t,Pf:m})},u);case "EXTERNAL":return n4.createElement(__c.IK,{key:w,href:x.url,target:x.target,
onClick:r7b({id:t,url:x.url,Kla:x.Kla,Um:h,Pf:m})},u);case "CUSTOM":return n4.createElement(__c.RG,{key:w,onClick:s7b({id:t,onClick:x.onClick,Pf:m})},u);default:throw new __c.F(x);}});return p},[m]);return n4.createElement(t7b,{Vga:l,message:b,className:d,Ya:e})}},q7b=function(a){let b=a.id,c=a.Pf;return()=>c(b)},r7b=function(a){let b=a.id,c=a.url,d=a.Kla,e=a.Um,g=a.Pf;return h=>{g(b);const l=e(c,d);"string"!==typeof l&&(h.preventDefault(),l(h))}},s7b=function(a){let b=a.id,c=a.onClick,d=a.Pf;return()=>
{d(b);c&&c()}},u7b=function(a){let b=a.ksb,c=a.ba,d=a.Um;return{ea:Object(p4.b)(e=>{e=e.Pf;const g=o4({message:__c.E("vvBgeg",[]),links:new Map([["account_settings_password",{type:"CUSTOM",onClick:b.$u}]]),className:"EG6qog",ba:c,Um:d});return n4.createElement(g,{Pf:e})}),type:"force_password_reset_notice",attributeType:"none",severity:"error",ig:!1}},v7b=function(a){let b=a.ba;a=a.Um;var c=__c.E("GcuYfg",[60]);return{ea:o4({message:c,links:new Map([["canva_for_business_survey_link",{type:"EXTERNAL",
url:"https://canvachina2020.surveyanalytics.com",Kla:1,target:"_blank"}]]),className:"oCpA7w",ba:b,Um:a}),type:"canva_for_business_survey_notice",attributeType:"localStorage",attributeName:"SEEN_CANVA_FOR_BUSINESS_SURVEY_ALERT_2",severity:"info",Da:__c.$ab}},w7b=function(a){let b=a.lCb,c=a.Ya,d=a.Fc,e=a.RFa,g=void 0===e?0:e,h=a.Gb,l=a.ba,m=a.Um;const p=()=>{h.Zl(21,"subscription_expiry_notice")},t=()=>{h.Zl(16,"subscription_expiry_notice")};return{ea:Object(p4.b)(u=>{u=u.Pf;const w=d.Sy,x=b?__c.E("bokQRA",
[]):__c.E("rx6r1Q",[g]);let z="";w?z=" "+__c.E("wsUDxg",[]):void 0!==w&&(z=" "+__c.E("xpfA6A",[]));return n4.createElement(o4({message:x+z,links:new Map([["renew_subscription_dialog",{type:"CUSTOM",onClick:b?t:p}]]),Ya:c,ba:l,Um:m}),{Pf:u})}),type:"subscription_expiry_notice",attributeType:"localStorage",attributeName:"SEEN_SUBSCRIPTION_EXPIRY_ALERT",severity:b?"error":"warning"}},x7b=function(a){let b=a.Zxb,c=a.locale,d=a.ba;a=a.Um;return{ea:o4({message:b?__c.E("t9qxEg",[__c.gi(__c.at(b,c,"DD MMMM"))]):
__c.E("RQFTgg",[]),links:new Map([["covid19_print_delay_tips_page",{type:"EXTERNAL",url:"https://about.canva.com/coronavirus-awareness-collection/",Kla:1,target:"_blank"}]]),className:"Qgk17A",ba:d,Um:a}),type:"covid19_print_delay_notice_v2",attributeType:"localStorage",attributeName:"SEEN_COVID19_PRINT_DELAY_NOTICE_V2",severity:"info"}},A7b=function(a){let b=a.pb,c=a.Ca,d=a.da;var e=a.H0;let g=a.y0,h=a.Fc,l=a.zj,m=a.A6;var p=a.Gb;let t=a.sda,u=a.A0,w=a.P_;a=a.Q_;const x=[],z=new q4,B=new __c.GH({prefix:c.user.id}),
A=y7b(d.Waa),G=c.user.bq.some(J=>J.ww);e&&c.user.IF&&!G&&x.push(u7b({ksb:z,ba:d.ba,Um:A}));m&&void 0!==t&&!B.getItem("SEEN_SUBSCRIPTION_EXPIRY_ALERT")&&(e=Math.floor(t/864E5),7>=e&&-7<=e&&x.push(w7b({lCb:0>t,Ya:async()=>{h.Yp||await l()},Fc:h,RFa:e,Gb:p,ba:d.ba,Um:A})));u&&((p=B.getItem("COVID19_PRINT_DELAY_NOTICE_V2_SEQUENCE"))&&parseInt(p,10)<a&&B.removeItem("SEEN_COVID19_PRINT_DELAY_NOTICE_V2"),B.getItem("SEEN_COVID19_PRINT_DELAY_NOTICE_V2")||(x.push(x7b({Zxb:w,locale:c.user.locale,ba:d.ba,Um:A})),
B.setItem("COVID19_PRINT_DELAY_NOTICE_V2_SEQUENCE",a.toString())));g&&!B.getItem("SEEN_CANVA_FOR_BUSINESS_SURVEY_ALERT_2")&&x.push(v7b({ba:d.ba,Um:A}));return{$ba:z7b({pb:b,Pq:x,userId:c.user.id,da:d,aja:B}).$ba,Xzb:z}},y7b=function(a){return a?(b,c)=>a.vKa(new __c.ky({uri:b,target:null!==c&&void 0!==c?c:1})):b=>b},E7b=function(a){let b=a.userId,c=a.fa,d=a.Ma,e=a.analyticsService,g=a.aa;a=a.n0;var h=__c.CI({mode:1});const l=h.o8,m=h.VTa;h=__c.CI({mode:0,Xja:!0,V4a:[__c.qyb(()=>m.value)]});const p=
h.o8;h=h.VTa;var t=__c.R$a({mode:0,Teb:h});const u=t.BZ;t=t.N4;const w=new B7b.a(e),x=new r4({Ma:d,analytics:w,aa:g,n0:a}),z=new s4({userId:b,Hma:m,Lsa:h,N4:t}),B=J=>x.gva(z,J),A=()=>w.trackPasswordResetDialogOpen({section:"homepage"}),G=Object(p4.b)(J=>{J=J.C_;return n4.createElement(C7b,{compact:2===c.la,qNa:__c.Xc.Hc(z.Re),error:__c.Xc.getError(z.Re),xmb:l,Epb:p,BZ:u,C_:J,onSubmit:B})});return J=>n4.createElement(D7b,{ea:G,Ya:A,C_:J.pa})},F7b=function(a){let b=a.userId,c=a.aOb,d=a.bk,e=a.$ba,g=
a.ga;const h=E7b({userId:b,fa:a.fa,analyticsService:a.analyticsService,Ma:a.Ma,aa:a.aa,n0:()=>e.DGa()});a=l=>{g(m=>{let p=m.pa;return n4.createElement(h,{pa:()=>{p();l&&l()}})})};c&&a(async()=>{try{await d.$W(new __c.ls({user:b,types:[7]}))}catch(l){}});return{$u:a}},G7b=function(a){let b=a.pb;const c=t4.create(a.Pq,a.fla);let d;Object(u4.I)(()=>c.jBa,e=>{e?(d=()=>n4.createElement(v4,{store:c,alert:e}),b.EZ=d):d&&(b.EZ===d&&(b.EZ=void 0),d=void 0)},{fireImmediately:!0})};
var m7b=class{constructor(){this.type="ERROR"}};var H7b="alerts",I7b="passwordreset";__c.qG.prototype.gva=__c.ia(56,function(a){const b=__c.Ii(__c.Ai(__c.Gi([__c.FT,__c.GT,I7b]),{["code"]:!0,["action"]:"applyToken"}));return this.ta.post(b,l7b(a)).then(n7b)});__c.fG.prototype.bJa=__c.ia(8,function(a){const b=__c.Gi([H7b]);__c.Ai(b,{["active"]:a.active});a=__c.Ii(b);return this.ta.get(a).then(o7b)});
const J7b=a=>__c.K.createElement(__c.JJ,Object.assign({},a,{type:"warning",variant:"global"})),K7b=a=>__c.K.createElement(__c.JJ,Object.assign({},a,{type:"error",variant:"global"})),L7b=a=>__c.K.createElement(__c.JJ,Object.assign({},a,{type:"info",variant:"global"})),p7b=a=>__c.K.createElement(__c.JM,Object.assign({},a,{Component:__c.IK}));var M7b=class{constructor(a){this.active=a.active}};const w4=__webpack_require__("mrSG");const u4=__webpack_require__("2vnA");const n4=__webpack_require__("q1tI");const p4=__webpack_require__("TyAF");const N7b=__webpack_require__("AYKG");const O7b=__webpack_require__("TSYQ");const B7b=__webpack_require__("J4UJ");const P7b=__webpack_require__("Gp1o");var q4=class{constructor(){this.$u=void 0}};__c.f(()=>q4.prototype.$u);Object(w4.b)([u4.E.ref],q4.prototype,"$u",void 0);const t7b=a=>{let b=a.Vga,c=a.message,d=a.className,e=a.Ya;n4.useEffect(()=>{e&&e()},[]);return n4.createElement("div",{className:d},b.render(c))};var Q7b=class extends n4.PureComponent{constructor(){super(...arguments);this.Of=()=>{var a=this.props;const b=a.alert;a=a.controller;a.trackDismissed(b.type);switch(b.attributeType){case "userAttribute":a.WXa(b.attributeName);break;case "localStorage":a.aja.setItem(b.attributeName,"true");break;case "none":break;default:throw new __c.F(b);}a.DGa()};this.Pf=a=>{const b=this.props;b.controller.analytics.trackGlobalAlertActioned({type:b.alert.type,link:a})}}componentDidMount(){const a=this.props;a.controller.trackShown(a.alert.type)}render(){var a=
this.props.alert;const b=a.ea;var c=a.severity;const d=a.Da;a=a.ig;switch(c){case "error":c=K7b;break;case "info":c=L7b;break;case "warning":c=J7b;break;default:throw new __c.F(c);}return n4.createElement(c,{ig:null!==a&&void 0!==a?a:!0,Of:this.Of,HQ:!0,Da:d},n4.createElement(b,{Pf:this.Pf}))}};var R7b=class{constructor(a,b,c,d,e){this.analyticsService=a;this.ba=b;this.aa=c;this.userId=d;this.aja=e;this.DGa=()=>{};this.analytics=new N7b.a(this.analyticsService)}trackShown(a){this.analytics.trackGlobalAlertShown({type:a})}trackDismissed(a){this.analytics.trackGlobalAlertDismissed({type:a})}async WXa(a){const b=new __c.NG({user:this.userId,attribute:new __c.OG({name:a,value:new __c.PG({value:!0})})});try{await this.aa.bH(b)}catch(c){this.ba.error(c,{vd:"Failed to update state for global alert",
extra:{["attribute"]:__c.jf(a)}})}}};const z7b=a=>{let b=a.pb,c=a.Pq,d=a.da;const e=new R7b(d.analyticsService,d.ba,d.aa,a.userId,a.aja);a=u4.l(()=>{const g=c.shift();b.JD=g?()=>n4.createElement(Q7b,{alert:g,controller:e}):void 0});a();e.DGa=a;return{$ba:e}};var D7b=class extends n4.PureComponent{componentDidMount(){this.props.Ya()}render(){const a=this.props,b=a.C_;return n4.createElement(__c.dl,{open:!0,na:b,YA:"button",Kj:"100%"},n4.createElement(a.ea,{C_:b}))}};
var C7b=class extends n4.PureComponent{constructor(){super(...arguments);this.onSubmit=a=>{var b=this.props;const c=b.onSubmit;b=b.C_;a.preventDefault();c(b)}}render(){var a=this.props;const b=a.compact,c=a.qNa,d=a.error,e=a.C_,g=a.xmb,h=a.Epb;a=a.BZ;return n4.createElement("form",{className:O7b("_4bllWw",b&&"pNI5fw"),onSubmit:this.onSubmit},n4.createElement("div",{className:"_7rjYdA"},n4.createElement("span",{className:"e6NvHg",title:"shield_icon",dangerouslySetInnerHTML:{__html:'<svg width="44" height="56" viewBox="0 0 44 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M41.21 7.027A3.292 3.292 0 0 1 44 10.292V29.57a25.06 25.06 0 0 1-3.944 13.486 24.798 24.798 0 0 1-5.945 6.441 3.479 3.479 0 0 1-.288.212 24.236 24.236 0 0 1-4.368 2.585l-5.476 2.555a4.726 4.726 0 0 1-3.943 0l-5.476-2.54C5.688 48.197 0 39.322 0 29.57V9.93a3.302 3.302 0 0 1 2.487-3.205c2.002-.514 4.99-1.33 8.07-2.419a49.99 49.99 0 0 0 2.85-1.073c2.018-.817 3.96-1.724 5.552-2.722.986-.62 2.23-.68 3.276-.151 3.443 1.769 11.436 5.534 18.974 6.668z" fill="#5843EB"/><path d="M29.622 36.812H14.864a1.231 1.231 0 0 1-1.229-1.225v-10.69c0-.664.546-1.224 1.229-1.224h14.758c.667 0 1.228.544 1.228 1.225v10.69a1.241 1.241 0 0 1-1.229 1.224z" fill="#fff"/><path d="M27.15 21.95v3.084h-1.866V21.98c0-.847-.334-1.603-.895-2.147a3.069 3.069 0 0 0-2.154-.892 3.044 3.044 0 0 0-3.049 3.039v3.054h-1.865V21.95c0-2.707 2.2-4.9 4.914-4.9 1.35 0 2.579.545 3.473 1.437a4.936 4.936 0 0 1 1.441 3.463zM22.235 30.976c1.08 0 1.957-.873 1.957-1.95 0-1.078-.876-1.951-1.957-1.951-1.08 0-1.957.873-1.957 1.95 0 1.078.876 1.95 1.957 1.95z" fill="#fff"/><path d="M21.735 29.54l-1.153 3.87h3.443l-1.305-3.87h-.985z" fill="#fff"/></svg>'}}),
n4.createElement(__c.M.Za,null,__c.E("/J0ZBw",[]))),n4.createElement("div",{className:"_0HIMnw"},n4.createElement(__c.M.ca,{color:"monoBlackA100"},__c.E("NNqzww",[])),n4.createElement(__c.M.ca,{color:"monoBlackA100"},__c.E("c2+6VQ",[]))),n4.createElement("div",{className:"Bepmlg"},n4.createElement(__c.ai,null,__c.E("4wBjOg",[])),n4.createElement(g,{placeholder:__c.E("zmitXQ",[]),disabled:c,autoComplete:"current-password",ME:d&&"currentPassword"===d?__c.E("hJ1KSA",[]):void 0})),n4.createElement("div",
{className:"Bepmlg"},n4.createElement(__c.ai,null,__c.E("K5N6yQ",[])),n4.createElement(h,{placeholder:__c.E("zYVQQw",[]),disabled:c,autoComplete:"new-password"})),n4.createElement("div",{className:"Bepmlg"},n4.createElement(__c.ai,null,__c.E("LCMsPQ",[])),n4.createElement(a,{placeholder:__c.E("82v6/Q",[]),disabled:c,autoComplete:"new-password"})),d&&"generic"===d&&n4.createElement(__c.cv,{title:__c.E("VZbscw",[])}),n4.createElement("div",{className:"fMMzJg"},n4.createElement(__c.el,{type:"submit",
stretch:!0,disabled:c},c?n4.createElement(__c.DL,{color:"white"}):__c.E("M6dEKw",[]))),b&&n4.createElement("div",{className:"hn2aXA n9zSJA ZTpOuQ"},n4.createElement(__c.NK,{onClick:e},__c.E("a6BqMw",[]))))}};var s4=class{constructor(a){let b=a.userId,c=a.Hma,d=a.Lsa;a=a.N4;this.Re={kind:0};this.userId=b;this.Hma=c;this.Lsa=d;this.N4=a}};__c.f(()=>s4.prototype.Re);Object(w4.b)([u4.E.ref],s4.prototype,"Re",void 0);
var r4=class{constructor(a){let b=a.Ma,c=a.aa,d=a.n0;this.analytics=a.analytics;this.Ma=b;this.aa=c;this.n0=d}async gva(a,b){if(this.validate(a)){this.Jj(a,__c.Xc.LD());try{const c=await this.aa.qx(new __c.iK({user:a.userId,Mg:a.Hma.value,password:a.Lsa.value}));switch(c.type){case "SUCCESS":this.analytics.trackResetPassword({section:"homepage",subsection:"modal",location:"password_change_modal"});this.Jj(a,__c.Xc.GR(!0));b();this.n0&&this.n0();__c.Ms(this.Ma,{re:__c.E("Vv+gIg",[])});break;case "ERROR":this.handleError(a);
break;default:throw new __c.F(c);}}catch(c){this.handleError(a,c)}}}validate(a){return __c.EI.Z2a(a.Hma,a.Lsa,a.N4)}handleError(a,b){b instanceof __c.jF?this.Jj(a,__c.Xc.wH("currentPassword")):this.Jj(a,__c.Xc.wH("generic"))}Jj(a,b){a.Re=b}};__c.f(()=>r4.prototype.Jj);Object(w4.b)([u4.l],r4.prototype,"Jj",null);var t4=class{constructor(a){this.now=1<arguments.length&&void 0!==arguments[1]?arguments[1]:()=>P7b.g(6E4);this.Hp=new u4.c;this.Pq=a}static create(a,b){const c=new t4(a);setInterval(async()=>{try{const d=await b.bJa(new M7b({}));u4.J(()=>c.Pq=d.Pq)}catch(d){}},6E5);return c}get jBa(){return this.kBa[0]}get kBa(){const a=this.now();return this.Pq.filter(b=>!this.Hp.has(b.message)&&(!b.xsa||b.xsa<=a)&&(!b.ksa||a<b.ksa))}nI(a){this.Hp.add(a.message)}};__c.f(()=>t4.prototype.Pq);
Object(w4.b)([u4.E.struct],t4.prototype,"Pq",void 0);__c.f(()=>t4.prototype.jBa);Object(w4.b)([u4.o],t4.prototype,"jBa",null);__c.f(()=>t4.prototype.kBa);Object(w4.b)([u4.o],t4.prototype,"kBa",null);var v4=class extends n4.PureComponent{render(){return n4.createElement(J7b,{ig:!0,Of:this.nI},this.props.alert.message)}nI(){this.props.store.nI(this.props.alert)}};__c.f(()=>v4.prototype.nI);Object(w4.b)([u4.l.bound],v4.prototype,"nI",null);__c.ESa={tBb:function(a){var b=a.sV;let c=a.da,d=a.pb,e=a.Ca,g=a.Fc,h=a.zj,l=a.Gb,m=a.IQ,p=a.fa,t=a.Ma;a=a.ga;G7b({Pq:b.Pq,fla:c.fla,pb:d});b=A7b({da:c,pb:d,Ca:e,H0:b.H0,Aaa:b.Aaa,y0:b.y0,Fc:g,zj:h,A6:b.A6,Gb:l,sda:b.sda,A0:b.A0,P_:b.P_?new Date(1E3*b.P_):void 0,Q_:b.Q_});const u=b.Xzb,w=F7b({fa:p,userId:e.user.id,aOb:m,analyticsService:c.analyticsService,Ma:t,aa:c.aa,bk:c.bk,$ba:b.$ba,ga:a}).$u;Object(u4.J)(()=>{u.$u=w});return{$u:w}}};
}).call(self, self._ad7c2fd0a872ef66d228a0d2ca415b43);}},[["Mq8p8","EEO/","HScp","K2W9","fDYT","rZBJ"]]]);
//# sourceMappingURL=231eb353f38fafc3fd2c696e5ab9b0f3.js.map